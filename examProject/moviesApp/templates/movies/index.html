{% extends "base.html" %}
{% load static %}

{% block title %}
电影库
{% endblock %}

{% block content %}
<!-- 广告横幅 -->
<div class="container-fluid">
    <div class="row">
        <img class="img-responsive model-img" src="{% static 'img/movies1.jpg' %}" 
                 alt="电影库横幅">
    </div>
</div>

<!-- 主体内容 -->
<div class="container">
    <div class="row row-3">
        <!-- 侧边导航栏 -->
        <div class="col-md-3">
            <div class="model-title">
                电影库
            </div>
            <div class="model-list">
                <ul class="list-group">
                    <li class="list-group-item active" id="movie_home">
                        <a href="{% url 'moviesApp:movie_home' %}">电影库首页</a>
                    </li>
                    <li class="list-group-item" id="category">
                        <a href="{% url 'moviesApp:category' %}">电影分类</a>
                    </li>
                    <li class="list-group-item" id="search">
                        <a href="{% url 'moviesApp:search' %}">电影搜索</a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- 说明文字和图片 -->
        <div class="col-md-9">
            <div class="model-details-title">
                电影库首页
            </div>
            <div class="model-details">
                <div class="row">
                    <img class="img-responsive" src="{% static 'img/movies.jpg' %}">
                </div>
                <p>
                    欢迎来到电影库！这里汇集了来自世界各地的优秀电影作品，涵盖动作、喜剧、爱情、科幻、恐怖、悬疑等多种类型。无论您喜欢经典老片还是最新大片，都能在这里找到心仪的电影。我们的电影库不仅提供详细的电影信息，还包括用户评分、影评和推荐，帮助您更好地选择想看的电影。您可以通过分类浏览快速找到特定类型的电影，或者使用搜索功能精确查找。每部电影都有详细的介绍页面，包括剧情简介、演职员表、上映时间和用户评论。开始您的电影探索之旅吧！
                </p>
                
                <h4>推荐电影</h4>
                <div class="row">
                    {% for movie in movies %}
                    <div class="col-md-4">
                        <div class="thumbnail" style="border: 1px solid #ddd; padding: 10px; margin-bottom: 20px;">
                            <div class="caption">
                                <h5>{{ movie.title }}</h5>
                                
                                <!-- 修复：添加海报显示 -->
                                {% if movie.poster %}
                                    <img src="{{ movie.poster.url }}" 
                                         alt="{{ movie.title }}"
                                         style="width: 100%; height: 200px; object-fit: cover; margin-bottom: 10px;">
                                {% else %}
                                    <img src="https://via.placeholder.com/300x200/ffc107/333?text={{ movie.title }}" 
                                         alt="{{ movie.title }}"
                                         style="width: 100%; height: 200px; object-fit: cover; margin-bottom: 10px;">
                                {% endif %}
                                
                                <p>分类：{{ movie.category.name }}</p>
                                <p>评分：⭐ {{ movie.rating }}</p>
                                <p>导演：{{ movie.director }}</p>
                                <p>
                                    <a href="{% url 'moviesApp:details' movie.id %}" class="btn btn-primary btn-sm">查看详情</a>
                                </p>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-md-12">
                        <div class="alert alert-info">暂无电影数据</div>
                    </div>
                    {% endfor %}
                </div>
                
                <div class="text-center">
                    <a href="{% url 'moviesApp:category' %}" class="btn btn-primary">按分类浏览</a>
                    <a href="{% url 'moviesApp:search' %}" class="btn btn-success">搜索电影</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}